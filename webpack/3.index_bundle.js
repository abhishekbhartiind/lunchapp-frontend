(window["webpackJsonp"] = window["webpackJsonp"] || []).push([[3],{

/***/ "./src/pages/apps/dainty/index.js":
/*!****************************************!*\
  !*** ./src/pages/apps/dainty/index.js ***!
  \****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireWildcard(__webpack_require__(/*! react */ \"./node_modules/react/index.js\"));\n\nvar _reactApollo = __webpack_require__(/*! react-apollo */ \"./node_modules/react-apollo/react-apollo.esm.js\");\n\nvar _graphqlTag = _interopRequireDefault(__webpack_require__(/*! graphql-tag */ \"./node_modules/graphql-tag/src/index.js\"));\n\nvar _antd = __webpack_require__(/*! antd */ \"./node_modules/antd/es/index.js\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : {}; if (desc.get || desc.set) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } } newObj.default = obj; return newObj; } }\n\nfunction _templateObject3() {\n  var data = _taggedTemplateLiteral([\"\\n\\tmutation($_id: ID!) {\\n\\t\\tdeleteDainty(_id: $_id)\\n\\t}\\n\"]);\n\n  _templateObject3 = function _templateObject3() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"\\n\\tmutation($daintyInput: DaintyInput!) {\\n\\t\\tcreateDainty(daintyInput: $daintyInput) {\\n\\t\\t\\t_id\\n\\t\\t\\timageUrl\\n\\t\\t\\tname\\n\\t\\t\\tquantity\\n\\t\\t}\\n\\t}\\n\"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n\\tquery {\\n\\t\\tdainties {\\n\\t\\t\\t_id\\n\\t\\t\\timageUrl\\n\\t\\t\\tname\\n\\t\\t\\tquantity\\n\\t\\t\\tcreatedAt\\n\\t\\t\\tupdatedAt\\n\\t\\t}\\n\\t}\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _taggedTemplateLiteral(strings, raw) { if (!raw) { raw = strings.slice(0); } return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } })); }\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance\"); }\n\nfunction _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); }\n\nfunction _iterableToArrayLimit(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\n// import { CTX } from '../../store'\nfunction Dainty(props) {\n  var _useState = (0, _react.useState)(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      visible = _useState2[0],\n      setVisible = _useState2[1];\n\n  var _useState3 = (0, _react.useState)(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      confirmLoading = _useState4[0],\n      setConfirmLoading = _useState4[1];\n\n  var _useState5 = (0, _react.useState)([]),\n      _useState6 = _slicedToArray(_useState5, 2),\n      dataSource = _useState6[0],\n      setDataSource = _useState6[1];\n\n  var _useState7 = (0, _react.useState)(true),\n      _useState8 = _slicedToArray(_useState7, 2),\n      loading = _useState8[0],\n      setLoading = _useState8[1]; // const [appState] = React.useContext(CTX)\n\n\n  var columns = [{\n    title: 'Image',\n    dataIndex: 'imageUrl' // key: 'image'\n\n  }, {\n    title: 'Name',\n    dataIndex: 'name' // key: 'name'\n\n  }, {\n    title: 'Quantity',\n    dataIndex: 'quantity' // key: 'quantity'\n\n  }, {\n    title: 'Action',\n    dataIndex: 'action',\n    fixed: 'right',\n    width: 90,\n    render: function render(text, record) {\n      return dataSource.length >= 1 ? _react.default.createElement(_react.default.Fragment, null, _react.default.createElement(_antd.Button, {\n        style: {\n          marginRight: 10\n        },\n        icon: \"edit\",\n        onClick: function onClick() {\n          return handleClick(record, 'update');\n        }\n      }), _react.default.createElement(_antd.Button, {\n        icon: \"delete\",\n        onClick: function onClick() {\n          return handleClick(record, 'delete');\n        }\n      })) : null;\n    }\n  }];\n  (0, _react.useEffect)(function () {\n    props.client.query({\n      query: DAINTIES\n    }).then(function (res) {\n      // console.log(res)\n      setDataSource(res.data.dainties);\n      setLoading(false);\n    }).catch(function (err) {\n      console.log(err);\n    });\n  }, [props.client]);\n\n  function showModal() {\n    setVisible(true);\n  }\n\n  function handleOk() {\n    setLoading(true);\n    props.form.validateFields(function (err, values) {\n      if (err) {\n        setConfirmLoading(false);\n        return;\n      } // console.log('Received values of form: ', values)\n\n\n      var imageUrl = values.imageUrl,\n          name = values.name,\n          quantity = values.quantity;\n      props.client.mutate({\n        mutation: CREATE_DAINTY,\n        variables: {\n          daintyInput: {\n            imageUrl: imageUrl,\n            name: name,\n            quantity: parseInt(quantity)\n          }\n        }\n      }).then(function (res) {\n        // console.log(res)\n        if (res.data.createDainty) {\n          setLoading(false);\n          setDataSource([].concat(_toConsumableArray(dataSource), [res.data.createDainty]));\n        }\n      }).catch(function (err) {\n        console.log(err);\n      });\n      props.form.resetFields();\n      setVisible(false);\n      setConfirmLoading(false);\n    });\n  }\n\n  function handleCancel() {\n    props.form.resetFields();\n    setVisible(false);\n  }\n\n  function handleClick(record, type) {\n    setLoading(true); // console.log(record, type)\n\n    type === 'update' ? console.log('update') : props.client.mutate({\n      mutation: DELETE_DAINTY,\n      variables: {\n        _id: record._id\n      }\n    }).then(function (res) {\n      // console.log(res)\n      if (res.data.deleteDainty === true) {\n        setLoading(false);\n        setDataSource(_toConsumableArray(dataSource.filter(function (item) {\n          return item._id !== record._id;\n        })));\n      }\n    }).catch(function (err) {\n      console.log(err);\n    });\n  }\n\n  var getFieldDecorator = props.form.getFieldDecorator;\n  return _react.default.createElement(_react.default.Fragment, null, \"Dainty\", _react.default.createElement(_antd.Button, {\n    style: {\n      marginBottom: 16,\n      float: 'right',\n      zIndex: 1\n    },\n    icon: \"plus\",\n    type: \"primary\",\n    onClick: showModal\n  }, \"New\"), _react.default.createElement(_antd.Modal, {\n    title: \"New Dainty\",\n    visible: visible,\n    onOk: handleOk,\n    confirmLoading: confirmLoading,\n    onCancel: handleCancel,\n    okText: \"Submit\"\n  }, _react.default.createElement(_antd.Form, {\n    layout: \"vertical\"\n  }, _react.default.createElement(_antd.Form.Item, {\n    label: \"Image\"\n  }, getFieldDecorator('imageUrl', {\n    rules: [{\n      required: true,\n      message: 'Please input the image of collection!'\n    }]\n  })(_react.default.createElement(_antd.Input, {\n    style: {\n      fontSize: 16\n    }\n  }))), _react.default.createElement(_antd.Form.Item, {\n    label: \"Name\"\n  }, getFieldDecorator('name', {\n    rules: [{\n      required: true,\n      message: 'Please input the name of collection!'\n    }]\n  })(_react.default.createElement(_antd.Input, {\n    style: {\n      fontSize: 16\n    }\n  }))), _react.default.createElement(_antd.Form.Item, {\n    label: \"Quantity\"\n  }, getFieldDecorator('quantity', {\n    rules: [{\n      required: true,\n      message: 'Please input the quantity of collection!'\n    }]\n  })(_react.default.createElement(_antd.Input, {\n    style: {\n      fontSize: 16\n    },\n    type: \"number\"\n  }))))), _react.default.createElement(_antd.Table, {\n    rowKey: function rowKey(record) {\n      return record._id;\n    },\n    dataSource: dataSource,\n    columns: columns,\n    bordered: true // title={() => 'Header'}\n    // footer={() => 'Footer'}\n    ,\n    loading: loading,\n    size: \"small\",\n    pagination: {\n      pageSize: 5\n    }\n  }));\n}\n\nvar DAINTIES = (0, _graphqlTag.default)(_templateObject());\nvar CREATE_DAINTY = (0, _graphqlTag.default)(_templateObject2()); // const UPDATE_DAINTY = gql`\n// \tmutation($_id: ID!, $daintyInput: DaintyInput!) {\n// \t\tupdateDainty(_id: $_id, daintyInput: $daintyInput)\n// \t}\n// `\n\nvar DELETE_DAINTY = (0, _graphqlTag.default)(_templateObject3());\n\nvar _default = (0, _reactApollo.withApollo)(_antd.Form.create({\n  name: 'daintyCreateForm'\n})(Dainty));\n\nexports.default = _default;\n\n//# sourceURL=webpack:///./src/pages/apps/dainty/index.js?");

/***/ })

}]);